<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.5.1.final using JasperReports Library version 6.5.1  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="reporteCajaResumido" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="6baf4be4-b0be-4baa-bdf2-b0ee4773dfe7">
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="conectionBDJAAPZ"/>
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w1" value="385"/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w2" value="604"/>
	<parameter name="FECHA_INICIO" class="java.sql.Date"/>
	<parameter name="FECHA_FIN" class="java.sql.Date"/>
	<queryString>
		<![CDATA[select 'Ingreso' as tipo,
case when sum(f.total_factura) is null 
then 0 else sum(f.total_factura) end as total,
((select case when sum (fa.total_factura) is null 
then 0 else  sum (fa.total_factura) end from factura fa
where fa.estado = 'A' and fa.fecha between  $P{FECHA_INICIO} 
and  $P{FECHA_FIN} ) - (select case when sum(eg.monto) is null 	
then 0 else sum(eg.monto) end from
egreso eg where eg.estado = 'A' and eg.fecha 
between  $P{FECHA_INICIO} and  $P{FECHA_FIN} )) as diferencia
from factura f
where f.estado = 'A'
and f.fecha between  $P{FECHA_INICIO} and  $P{FECHA_FIN}

union all 

select 'Egreso' as tipo,case when sum(e.monto) is null then 0 else sum(e.monto) end as total,
((select case when sum (fa.total_factura) is null 
then 0 else  sum (fa.total_factura) end from factura fa
where fa.estado = 'A' and fa.fecha between  $P{FECHA_INICIO} 
and  $P{FECHA_FIN} ) - (select case when sum(eg.monto) is null 	
then 0 else sum(eg.monto) end from
egreso eg where eg.estado = 'A' and eg.fecha 
between  $P{FECHA_INICIO} and  $P{FECHA_FIN} )) as diferencia
from egreso e
where e.estado = 'A'
and e.fecha between  $P{FECHA_INICIO} and  $P{FECHA_FIN}]]>
	</queryString>
	<field name="tipo" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="tipo"/>
	</field>
	<field name="total" class="java.lang.Double">
		<property name="com.jaspersoft.studio.field.label" value="total"/>
	</field>
	<field name="diferencia" class="java.lang.Double">
		<property name="com.jaspersoft.studio.field.label" value="diferencia"/>
	</field>
	<group name="Group1">
		<groupExpression><![CDATA[$F{tipo}]]></groupExpression>
		<groupFooter>
			<band/>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="89" splitType="Stretch">
			<rectangle>
				<reportElement x="0" y="0" width="555" height="80" uuid="f39a5074-7672-4d16-94a5-c49c33e96edb"/>
			</rectangle>
			<line>
				<reportElement x="180" y="0" width="1" height="80" uuid="cf68ad76-12ff-4b8d-bbd1-54aa4db0dfb9"/>
			</line>
			<staticText>
				<reportElement x="13" y="50" width="150" height="10" uuid="d3faa0a5-3876-43f7-b5a0-14b638ed2f8e"/>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="7"/>
				</textElement>
				<text><![CDATA[Junta Administradora de Agua Potable]]></text>
			</staticText>
			<staticText>
				<reportElement x="13" y="60" width="150" height="10" uuid="51372ced-1e97-40e2-b68d-c7816ed06eb1"/>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="7"/>
				</textElement>
				<text><![CDATA[Zapotal - Santa Elena]]></text>
			</staticText>
			<staticText>
				<reportElement x="13" y="70" width="150" height="10" uuid="44f4d449-801d-415b-ab53-744e04e44956"/>
				<textElement textAlignment="Center">
					<font fontName="Arial" size="7"/>
				</textElement>
				<text><![CDATA[RUC.: 2490016034001]]></text>
			</staticText>
			<staticText>
				<reportElement x="200" y="11" width="60" height="14" uuid="54f73c03-8b3b-45aa-a675-6521df6c6cac"/>
				<textElement>
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[Reporte:]]></text>
			</staticText>
			<staticText>
				<reportElement x="270" y="12" width="240" height="14" uuid="db784b57-cf34-4efa-8be3-08441e33ad60"/>
				<textElement>
					<font fontName="Bookman Old Style" isBold="false"/>
				</textElement>
				<text><![CDATA[Reporte de caja - Resumido]]></text>
			</staticText>
			<staticText>
				<reportElement x="200" y="52" width="60" height="14" uuid="d1adb1bf-cadd-4a82-9d47-3c553bf0aac2"/>
				<textElement>
					<font fontName="Arial" isBold="true"/>
				</textElement>
				<text><![CDATA[Fecha:]]></text>
			</staticText>
			<textField pattern="dd/MM/yyyy h:mm a">
				<reportElement x="270" y="53" width="100" height="13" uuid="61b9cd28-6bf0-4249-9535-7ac4b0858c2d"/>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band height="35" splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="40" splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="21" splitType="Stretch">
			<rectangle>
				<reportElement x="16" y="0" width="371" height="21" uuid="6c968502-ba25-4ae7-b090-4c51e12c6be3"/>
			</rectangle>
			<textField>
				<reportElement x="36" y="3" width="100" height="13" uuid="bf0557e1-25f3-42c0-af11-76c64d55fe5c">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="87cd018a-a928-4266-a5d1-69a9871a9f71"/>
				</reportElement>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{tipo}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="276" y="3" width="100" height="13" uuid="c194fe77-f6d8-4a9b-bda3-6285518b1572">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="684fce39-9bd2-451b-b00a-4a0a261a0fa8"/>
				</reportElement>
				<textFieldExpression><![CDATA[$F{total}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="32" splitType="Stretch">
			<rectangle>
				<reportElement x="16" y="10" width="371" height="22" backcolor="#C9D1C2" uuid="39741def-ad44-46d3-8973-133bed48dbe0"/>
			</rectangle>
			<staticText>
				<reportElement x="37" y="16" width="80" height="13" uuid="bf13b140-dd8d-4f53-b1c2-9b001dc04f2e"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Total en caja:]]></text>
			</staticText>
			<textField>
				<reportElement x="276" y="16" width="100" height="13" uuid="15cc7dd8-41e4-4143-84f0-dfd5eacda08e"/>
				<textFieldExpression><![CDATA[$F{diferencia}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
